const He=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}};He();function C(){}function Ue(t,e){for(const n in e)t[n]=e[n];return t}function Pe(t){return t()}function Ee(){return Object.create(null)}function q(t){t.forEach(Pe)}function Be(t){return typeof t=="function"}function Y(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let se;function fe(t,e){return se||(se=document.createElement("a")),se.href=e,t===se.href}function je(t){return Object.keys(t).length===0}function Ce(t,e,n,r){if(t){const o=Me(t,e,n,r);return t[0](o)}}function Me(t,e,n,r){return t[1]&&r?Ue(n.ctx.slice(),t[1](r(e))):n.ctx}function Le(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const l=[],s=Math.max(e.dirty.length,o.length);for(let d=0;d<s;d+=1)l[d]=e.dirty[d]|o[d];return l}return e.dirty|o}return e.dirty}function Se(t,e,n,r,o,l){if(o){const s=Me(e,n,r,l);t.p(s,o)}}function De(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function a(t,e){t.appendChild(e)}function L(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function I(t){return document.createTextNode(t)}function S(){return I(" ")}function pe(){return I("")}function z(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function _(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function xe(t){return Array.from(t.childNodes)}function be(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function K(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e){r.selected=!0;return}}t.selectedIndex=-1}function ge(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function qe(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,r,e),o}let ee;function Z(t){ee=t}function Ke(){if(!ee)throw new Error("Function called outside component initialization");return ee}function Re(){const t=Ke();return(e,n,{cancelable:r=!1}={})=>{const o=t.$$.callbacks[e];if(o){const l=qe(e,n,{cancelable:r});return o.slice().forEach(s=>{s.call(t,l)}),!l.defaultPrevented}return!0}}const V=[],_e=[],ce=[],Ie=[],ze=Promise.resolve();let ve=!1;function We(){ve||(ve=!0,ze.then(Ge))}function W(t){ce.push(t)}const he=new Set;let ie=0;function Ge(){const t=ee;do{for(;ie<V.length;){const e=V[ie];ie++,Z(e),Ye(e.$$)}for(Z(null),V.length=0,ie=0;_e.length;)_e.pop()();for(let e=0;e<ce.length;e+=1){const n=ce[e];he.has(n)||(he.add(n),n())}ce.length=0}while(V.length);for(;Ie.length;)Ie.pop()();ve=!1,he.clear(),Z(t)}function Ye(t){if(t.fragment!==null){t.update(),q(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(W)}}const ae=new Set;let x;function we(){x={r:0,c:[],p:x}}function ke(){x.r||q(x.c),x=x.p}function w(t,e){t&&t.i&&(ae.delete(t),t.i(e))}function k(t,e,n,r){if(t&&t.o){if(ae.has(t))return;ae.add(t),x.c.push(()=>{ae.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function F(t){t&&t.c()}function A(t,e,n,r){const{fragment:o,on_mount:l,on_destroy:s,after_update:d}=t.$$;o&&o.m(e,n),r||W(()=>{const c=l.map(Pe).filter(Be);s?s.push(...c):q(c),t.$$.on_mount=[]}),d.forEach(W)}function N(t,e){const n=t.$$;n.fragment!==null&&(q(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Xe(t,e){t.$$.dirty[0]===-1&&(V.push(t),We(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(t,e,n,r,o,l,s,d=[-1]){const c=ee;Z(t);const i=t.$$={fragment:null,ctx:null,props:l,update:C,not_equal:o,bound:Ee(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Ee(),dirty:d,skip_bound:!1,root:e.target||c.$$.root};s&&s(i.root);let u=!1;if(i.ctx=n?n(t,e.props||{},(m,f,...h)=>{const v=h.length?h[0]:f;return i.ctx&&o(i.ctx[m],i.ctx[m]=v)&&(!i.skip_bound&&i.bound[m]&&i.bound[m](v),u&&Xe(t,m)),f}):[],i.update(),u=!0,q(i.before_update),i.fragment=r?r(i.ctx):!1,e.target){if(e.hydrate){const m=xe(e.target);i.fragment&&i.fragment.l(m),m.forEach($)}else i.fragment&&i.fragment.c();e.intro&&w(t.$$.fragment),A(t,e.target,e.anchor,e.customElement),Ge()}Z(c)}class J{$destroy(){N(this,1),this.$destroy=C}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!je(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Je(t){let e,n,r,o;return{c(){e=p("button"),n=I(t[0]),_(e,"title",t[1]),_(e,"class","material-icons svelte-dle3f6")},m(l,s){L(l,e,s),a(e,n),r||(o=z(e,"click",t[3]),r=!0)},p(l,[s]){s&1&&be(n,l[0]),s&2&&_(e,"title",l[1])},i:C,o:C,d(l){l&&$(e),r=!1,o()}}}function Qe(t,e,n){let{icon:r}=e,{title:o}=e;const l=Re(),s=()=>l("click");return t.$$set=d=>{"icon"in d&&n(0,r=d.icon),"title"in d&&n(1,o=d.title)},[r,o,l,s]}class de extends J{constructor(e){super(),X(this,e,Qe,Je,Y,{icon:0,title:1})}}const Ve=t=>({}),Ae=t=>({}),Ze=t=>({}),Ne=t=>({});function et(t){let e,n,r,o,l,s,d,c,i,u;const m=t[2].actions,f=Ce(m,t,t[1],Ne),h=t[2].content,v=Ce(h,t,t[1],Ae);return{c(){e=p("section"),n=p("div"),r=p("span"),o=I(t[0]),l=S(),s=p("div"),d=S(),f&&f.c(),c=S(),i=p("div"),v&&v.c(),_(s,"class","spacer svelte-eqwvm9"),_(n,"class","title svelte-eqwvm9"),_(i,"class","content svelte-eqwvm9"),_(e,"class","svelte-eqwvm9")},m(g,b){L(g,e,b),a(e,n),a(n,r),a(r,o),a(n,l),a(n,s),a(n,d),f&&f.m(n,null),a(e,c),a(e,i),v&&v.m(i,null),u=!0},p(g,[b]){(!u||b&1)&&be(o,g[0]),f&&f.p&&(!u||b&2)&&Se(f,m,g,g[1],u?Le(m,g[1],b,Ze):De(g[1]),Ne),v&&v.p&&(!u||b&2)&&Se(v,h,g,g[1],u?Le(h,g[1],b,Ve):De(g[1]),Ae)},i(g){u||(w(f,g),w(v,g),u=!0)},o(g){k(f,g),k(v,g),u=!1},d(g){g&&$(e),f&&f.d(g),v&&v.d(g)}}}function tt(t,e,n){let{$$slots:r={},$$scope:o}=e,{title:l}=e;return t.$$set=s=>{"title"in s&&n(0,l=s.title),"$$scope"in s&&n(1,o=s.$$scope)},[l,o,r]}class ue extends J{constructor(e){super(),X(this,e,tt,et,Y,{title:0})}}function nt(t){let e,n;return e=new de({props:{slot:"actions",title:"Close",icon:"clear"}}),e.$on("click",t[4]),{c(){F(e.$$.fragment)},m(r,o){A(e,r,o),n=!0},p:C,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function rt(t){let e,n;return{c(){e=p("span"),n=I(t[1]),_(e,"slot","content")},m(r,o){L(r,e,o),a(e,n)},p(r,o){o&2&&be(n,r[1])},d(r){r&&$(e)}}}function ot(t){let e,n,r;return n=new ue({props:{title:t[2],$$slots:{content:[rt],actions:[nt]},$$scope:{ctx:t}}}),{c(){e=p("dialog"),F(n.$$.fragment),_(e,"class","svelte-4cdcx4")},m(o,l){L(o,e,l),A(n,e,null),t[5](e),r=!0},p(o,[l]){const s={};l&4&&(s.title=o[2]),l&67&&(s.$$scope={dirty:l,ctx:o}),n.$set(s)},i(o){r||(w(n.$$.fragment,o),r=!0)},o(o){k(n.$$.fragment,o),r=!1},d(o){o&&$(e),N(n),t[5](null)}}}function lt(t,e,n){let r,o,{error:l}=e,s;const d=()=>{s.close()};function c(i){_e[i?"unshift":"push"](()=>{s=i,n(0,s)})}return t.$$set=i=>{"error"in i&&n(3,l=i.error)},t.$$.update=()=>{t.$$.dirty&8&&n(2,r=l==null?void 0:l.name),t.$$.dirty&8&&n(1,o=l==null?void 0:l.message),t.$$.dirty&9&&s!==void 0&&(l!==void 0?s.showModal():s.close())},[s,o,r,l,d,c]}class st extends J{constructor(e){super(),X(this,e,lt,ot,Y,{error:3})}}function it(t){let e;return{c(){e=p("header"),e.innerHTML=`<h1 class="svelte-2krk3n">Factorio Pixel Art Generator</h1> 
  <span class="version svelte-2krk3n">v1.0.0</span> 
  <a title="Changelog" class="material-icons svelte-2krk3n" href="https://github.com/NicoKandut/factorio-solar-art/blob/main/CHANGELOG.md" target="_newtab">feed</a> 
  <a title="Github Repository" class="material-icons svelte-2krk3n" href="https://github.com/NicoKandut/factorio-pixel-art-generator" target="_newtab"><svg height="16" aria-hidden="true" viewBox="0 0 16 16" width="16" data-view-component="true" style="fill: currentcolor; minWidth: 16px;"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a> 
  <a title="Discord Server" class="material-icons svelte-2krk3n" href="https://discord.gg/jPf45KS54t" target="_newtab">discord</a> 
  <a title="Solar Art Generator" href="https://nicokandut.github.io/factorio-solar-art/" target="_newtab" class="svelte-2krk3n"><img src="./solar_panel.png" alt="Solar Art Generator" class="svelte-2krk3n"/></a>`,_(e,"class","svelte-2krk3n")},m(n,r){L(n,e,r)},p:C,i:C,o:C,d(n){n&&$(e)}}}class ct extends J{constructor(e){super(),X(this,e,null,it,Y,{})}}function at(t){let e,n,r,o,l,s,d,c;return{c(){e=p("div"),n=p("span"),n.textContent="upload",r=S(),o=p("span"),o.textContent="Click here to upload a picture or drag and drop a picture here",l=S(),s=p("input"),_(n,"class","material-icons svelte-147nu1e"),_(o,"class","hint svelte-147nu1e"),_(s,"type","file"),_(s,"accept","image/*"),_(s,"class","svelte-147nu1e"),_(e,"class","svelte-147nu1e")},m(i,u){L(i,e,u),a(e,n),a(e,r),a(e,o),a(e,l),a(e,s),t[2](s),d||(c=[z(s,"change",t[3]),z(e,"click",t[4])],d=!0)},p:C,i:C,o:C,d(i){i&&$(e),t[2](null),d=!1,q(c)}}}function ut(t,e,n){const r=Re();let o;function l(c){_e[c?"unshift":"push"](()=>{o=c,n(0,o)})}return[o,r,l,c=>{var u;const i=(u=c.target.files)==null?void 0:u[0];r("upload",i)},()=>o==null?void 0:o.click()]}class ft extends J{constructor(e){super(),X(this,e,ut,at,Y,{})}}function _t(t){let e,n,r,o,l,s,d,c,i,u,m,f,h,v,g,b,O,te,G,ne,H,re,U,P,T,D,y,oe,E,M,le,R,ye,me,$e;return{c(){e=p("div"),n=p("label"),r=p("span"),r.textContent="Palette",o=S(),l=p("select"),s=p("option"),d=I("Grayscale"),c=p("option"),i=I("[MOD] Concrete Tints"),u=p("option"),m=I("[MOD] Color Coding"),f=S(),h=p("label"),v=p("span"),v.textContent="Color Comparison",g=S(),b=p("select"),O=p("option"),te=I("Brightness"),G=p("option"),ne=I("Linear"),H=p("option"),re=I("Hue"),U=p("option"),P=I("Delta E"),T=S(),D=p("label"),y=p("span"),y.textContent="Mixing Mode",oe=S(),E=p("select"),M=p("option"),le=I("Solid Colors"),R=p("option"),ye=I("Halftoning"),_(r,"class","svelte-vi9hxl"),s.__value=t[6].GRAYSCALE,s.value=s.__value,c.__value=t[6].CONCRETE_TINTS,c.value=c.__value,u.__value=t[6].COLOR_CODING,u.value=u.__value,_(l,"class","svelte-vi9hxl"),t[1]===void 0&&W(()=>t[11].call(l)),_(n,"class","svelte-vi9hxl"),_(v,"class","svelte-vi9hxl"),O.__value=t[7].BRIGHTNESS,O.value=O.__value,G.__value=t[7].LINEAR,G.value=G.__value,H.__value=t[7].MODIFIED,H.value=H.__value,U.__value=t[7].DELTA_E,U.value=U.__value,_(b,"class","svelte-vi9hxl"),t[2]===void 0&&W(()=>t[12].call(b)),_(h,"class","svelte-vi9hxl"),_(y,"class","svelte-vi9hxl"),M.__value=t[8].OFF,M.value=M.__value,R.__value=t[8].DUAL,R.value=R.__value,_(E,"class","svelte-vi9hxl"),t[3]===void 0&&W(()=>t[13].call(E)),_(D,"class","svelte-vi9hxl"),_(e,"slot","content"),_(e,"class","settings svelte-vi9hxl")},m(B,Q){L(B,e,Q),a(e,n),a(n,r),a(n,o),a(n,l),a(l,s),a(s,d),a(l,c),a(c,i),a(l,u),a(u,m),K(l,t[1]),a(e,f),a(e,h),a(h,v),a(h,g),a(h,b),a(b,O),a(O,te),a(b,G),a(G,ne),a(b,H),a(H,re),a(b,U),a(U,P),K(b,t[2]),a(e,T),a(e,D),a(D,y),a(D,oe),a(D,E),a(E,M),a(M,le),a(E,R),a(R,ye),K(E,t[3]),me||($e=[z(l,"change",t[11]),z(b,"change",t[12]),z(E,"change",t[13])],me=!0)},p(B,Q){Q&66&&K(l,B[1]),Q&132&&K(b,B[2]),Q&264&&K(E,B[3])},d(B){B&&$(e),me=!1,q($e)}}}function Oe(t){let e,n;return e=new de({props:{title:"Clear",icon:"clear"}}),e.$on("click",t[15]),{c(){F(e.$$.fragment)},m(r,o){A(e,r,o),n=!0},p:C,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function dt(t){let e,n,r=t[0]!==void 0&&Oe(t);return{c(){r&&r.c(),e=pe()},m(o,l){r&&r.m(o,l),L(o,e,l),n=!0},p(o,l){o[0]!==void 0?r?(r.p(o,l),l&1&&w(r,1)):(r=Oe(o),r.c(),w(r,1),r.m(e.parentNode,e)):r&&(we(),k(r,1,1,()=>{r=null}),ke())},i(o){n||(w(r),n=!0)},o(o){k(r),n=!1},d(o){r&&r.d(o),o&&$(e)}}}function pt(t){let e,n,r;return{c(){e=p("img"),fe(e.src,n=URL.createObjectURL(t[0]))||_(e,"src",n),_(e,"alt",r=t[0].name),_(e,"class","svelte-vi9hxl")},m(o,l){L(o,e,l)},p(o,l){l&1&&!fe(e.src,n=URL.createObjectURL(o[0]))&&_(e,"src",n),l&1&&r!==(r=o[0].name)&&_(e,"alt",r)},i:C,o:C,d(o){o&&$(e)}}}function mt(t){let e,n;return e=new ft({}),e.$on("upload",t[14]),{c(){F(e.$$.fragment)},m(r,o){A(e,r,o),n=!0},p:C,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function gt(t){let e,n,r,o;const l=[mt,pt],s=[];function d(c,i){return c[0]===void 0?0:1}return e=d(t),n=s[e]=l[e](t),{c(){n.c(),r=pe()},m(c,i){s[e].m(c,i),L(c,r,i),o=!0},p(c,i){let u=e;e=d(c),e===u?s[e].p(c,i):(we(),k(s[u],1,1,()=>{s[u]=null}),ke(),n=s[e],n?n.p(c,i):(n=s[e]=l[e](c),n.c()),w(n,1),n.m(r.parentNode,r))},i(c){o||(w(n),o=!0)},o(c){k(n),o=!1},d(c){s[e].d(c),c&&$(r)}}}function Te(t){let e,n,r,o;return e=new de({props:{title:"Copy blueprint to clipboard",icon:"content_copy"}}),e.$on("click",t[9]),r=new de({props:{title:"Download Blueprint",icon:"download"}}),r.$on("click",t[10]),{c(){F(e.$$.fragment),n=S(),F(r.$$.fragment)},m(l,s){A(e,l,s),L(l,n,s),A(r,l,s),o=!0},p:C,i(l){o||(w(e.$$.fragment,l),w(r.$$.fragment,l),o=!0)},o(l){k(e.$$.fragment,l),k(r.$$.fragment,l),o=!1},d(l){N(e,l),l&&$(n),N(r,l)}}}function ht(t){let e,n,r=t[4]&&Te(t);return{c(){r&&r.c(),e=pe()},m(o,l){r&&r.m(o,l),L(o,e,l),n=!0},p(o,l){o[4]?r?(r.p(o,l),l&16&&w(r,1)):(r=Te(o),r.c(),w(r,1),r.m(e.parentNode,e)):r&&(we(),k(r,1,1,()=>{r=null}),ke())},i(o){n||(w(r),n=!0)},o(o){k(r),n=!1},d(o){r&&r.d(o),o&&$(e)}}}function Fe(t){let e,n;return{c(){e=p("img"),fe(e.src,n=t[4])||_(e,"src",n),_(e,"alt","Preview"),_(e,"class","svelte-vi9hxl")},m(r,o){L(r,e,o)},p(r,o){o&16&&!fe(e.src,n=r[4])&&_(e,"src",n)},d(r){r&&$(e)}}}function vt(t){let e,n=t[4]&&Fe(t);return{c(){n&&n.c(),e=pe()},m(r,o){n&&n.m(r,o),L(r,e,o)},p(r,o){r[4]?n?n.p(r,o):(n=Fe(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&$(e)}}}function bt(t){let e,n,r,o,l,s,d,c,i,u,m;return n=new ct({}),o=new ue({props:{title:"Settings",$$slots:{content:[_t]},$$scope:{ctx:t}}}),s=new ue({props:{title:"Source",$$slots:{content:[gt],actions:[dt]},$$scope:{ctx:t}}}),c=new ue({props:{title:"Preview",$$slots:{content:[vt],actions:[ht]},$$scope:{ctx:t}}}),u=new st({props:{error:t[5]}}),{c(){e=p("main"),F(n.$$.fragment),r=S(),F(o.$$.fragment),l=S(),F(s.$$.fragment),d=S(),F(c.$$.fragment),i=S(),F(u.$$.fragment),_(e,"class","svelte-vi9hxl")},m(f,h){L(f,e,h),A(n,e,null),a(e,r),A(o,e,null),a(e,l),A(s,e,null),a(e,d),A(c,e,null),L(f,i,h),A(u,f,h),m=!0},p(f,[h]){const v={};h&2097166&&(v.$$scope={dirty:h,ctx:f}),o.$set(v);const g={};h&2097169&&(g.$$scope={dirty:h,ctx:f}),s.$set(g);const b={};h&2097168&&(b.$$scope={dirty:h,ctx:f}),c.$set(b);const O={};h&32&&(O.error=f[5]),u.$set(O)},i(f){m||(w(n.$$.fragment,f),w(o.$$.fragment,f),w(s.$$.fragment,f),w(c.$$.fragment,f),w(u.$$.fragment,f),m=!0)},o(f){k(n.$$.fragment,f),k(o.$$.fragment,f),k(s.$$.fragment,f),k(c.$$.fragment,f),k(u.$$.fragment,f),m=!1},d(f){f&&$(e),N(n),N(o),N(s),N(c),f&&$(i),N(u,f)}}}const j=1;function wt(t){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");return n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height)}function kt(){const t=performance.measure("total time","start","end").duration.toFixed(0),e=performance.measure("preparation time","start","proc-start").duration.toFixed(0),n=performance.measure("processing time","proc-start","proc-end").duration.toFixed(0),r=performance.measure("processing time","proc-end","end").duration.toFixed(0),o=`[js] Done. Took ${t} ms total.`;console.group(o),console.info("Preparation",e,"ms"),console.info("Processing",n,"ms"),console.info("End",r,"ms"),console.groupEnd()}function yt(t,e,n){let r,o,l,s,d,c,i,u,m;const f={GRAYSCALE:0,CONCRETE_TINTS:1,COLOR_CODING:2},h={BRIGHTNESS:0,LINEAR:1,MODIFIED:2,DELTA_E:3},v={OFF:0,DUAL:1};async function g(){const D=await(await(await fetch("./out.js")).blob()).text();r=await Function('"use strict"; '+D.replace("var Module = ","return"))()(),d=r.cwrap("process","string",["number","number","number","number","number","number"]),window.module=r}g();async function b(P){performance.mark("start");let T,D;try{const y=await createImageBitmap(P),oe=wt(y);T=r._create_buffer(y.width,y.height),D=r._create_buffer(y.width*j,y.height*j),r.HEAP8.set(oe.data,T),performance.mark("proc-start"),s=d(T,D,y.width,y.height,j,i,u,m),performance.mark("proc-end");const E=document.createElement("canvas"),M=E.getContext("2d");E.width=y.width*j,E.height=y.height*j;const le=r.HEAPU8.subarray(D,D+E.width*E.height*4),R=M.createImageData(y.width*j,y.height*j);R.data.set(le),M.putImageData(R,0,0),n(4,l=E.toDataURL("image/png")),performance.mark("end"),kt()}catch(y){n(5,c=y)}finally{r._destroy_buffer(T),r._destroy_buffer(D)}}async function O(){if(s!==void 0)try{await navigator.clipboard.writeText(s)}catch(P){console.error("Unexpected error while copying:",P)}}async function te(){if(s===void 0)return;const T=await(await window.showSaveFilePicker({types:[{description:"Text Files",accept:{"text/plain":[".txt"]}}],suggestedName:"generated blueprint"})).createWritable();await T.write(s),await T.close()}function G(){i=ge(this),n(1,i),n(0,o),n(2,u),n(3,m),n(6,f)}function ne(){u=ge(this),n(2,u),n(0,o),n(1,i),n(3,m),n(7,h)}function H(){m=ge(this),n(3,m),n(0,o),n(1,i),n(2,u),n(8,v)}const re=P=>{n(0,o=P.detail)},U=()=>{n(0,o=void 0),n(4,l=void 0)};return t.$$.update=()=>{t.$$.dirty&15&&o&&(b(o),n(1,i),n(0,o),n(2,u),n(3,m),n(2,u),n(0,o),n(1,i),n(3,m),n(3,m),n(0,o),n(1,i),n(2,u))},[o,i,u,m,l,c,f,h,v,O,te,G,ne,H,re,U]}class $t extends J{constructor(e){super(),X(this,e,yt,bt,Y,{})}}new $t({target:document.getElementById("app")});
