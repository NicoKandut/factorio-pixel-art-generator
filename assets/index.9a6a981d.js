const ze=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};ze();function k(){}function Oe(t,e){for(const n in e)t[n]=e[n];return t}function ke(t){return t()}function fe(){return Object.create(null)}function T(t){t.forEach(ke)}function Pe(t){return typeof t=="function"}function F(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let q;function J(t,e){return q||(q=document.createElement("a")),q.href=e,t===q.href}function je(t){return Object.keys(t).length===0}function de(t,e,n,r){if(t){const o=Ee(t,e,n,r);return t[0](o)}}function Ee(t,e,n,r){return t[1]&&r?Oe(n.ctx.slice(),t[1](r(e))):n.ctx}function _e(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const i=[],s=Math.max(e.dirty.length,o.length);for(let u=0;u<s;u+=1)i[u]=e.dirty[u]|o[u];return i}return e.dirty|o}return e.dirty}function pe(t,e,n,r,o,i){if(o){const s=Ee(e,n,r,i);t.p(s,o)}}function me(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function p(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function M(t){return document.createTextNode(t)}function z(){return M(" ")}function te(){return M("")}function Q(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function De(t){return Array.from(t.childNodes)}function ie(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ge(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e){r.selected=!0;return}}t.selectedIndex=-1}function Ne(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function Me(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,r,e),o}let H;function G(t){H=t}function xe(){if(!H)throw new Error("Function called outside component initialization");return H}function Ce(){const t=xe();return(e,n,{cancelable:r=!1}={})=>{const o=t.$$.callbacks[e];if(o){const i=Me(e,n,{cancelable:r});return o.slice().forEach(s=>{s.call(t,i)}),!i.defaultPrevented}return!0}}const U=[],V=[],W=[],he=[],Te=Promise.resolve();let oe=!1;function Fe(){oe||(oe=!0,Te.then(Le))}function Z(t){W.push(t)}const re=new Set;let K=0;function Le(){const t=H;do{for(;K<U.length;){const e=U[K];K++,G(e),Re(e.$$)}for(G(null),U.length=0,K=0;V.length;)V.pop()();for(let e=0;e<W.length;e+=1){const n=W[e];re.has(n)||(re.add(n),n())}W.length=0}while(U.length);for(;he.length;)he.pop()();oe=!1,re.clear(),G(t)}function Re(t){if(t.fragment!==null){t.update(),T(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Z)}}const Y=new Set;let N;function se(){N={r:0,c:[],p:N}}function ce(){N.r||T(N.c),N=N.p}function $(t,e){t&&t.i&&(Y.delete(t),t.i(e))}function v(t,e,n,r){if(t&&t.o){if(Y.has(t))return;Y.add(t),N.c.push(()=>{Y.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function A(t){t&&t.c()}function L(t,e,n,r){const{fragment:o,on_mount:i,on_destroy:s,after_update:u}=t.$$;o&&o.m(e,n),r||Z(()=>{const c=i.map(ke).filter(Pe);s?s.push(...c):T(c),t.$$.on_mount=[]}),u.forEach(Z)}function S(t,e){const n=t.$$;n.fragment!==null&&(T(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ie(t,e){t.$$.dirty[0]===-1&&(U.push(t),Fe(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(t,e,n,r,o,i,s,u=[-1]){const c=H;G(t);const l=t.$$={fragment:null,ctx:null,props:i,update:k,not_equal:o,bound:fe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:fe(),dirty:u,skip_bound:!1,root:e.target||c.$$.root};s&&s(l.root);let f=!1;if(l.ctx=n?n(t,e.props||{},(g,a,...m)=>{const b=m.length?m[0]:a;return l.ctx&&o(l.ctx[g],l.ctx[g]=b)&&(!l.skip_bound&&l.bound[g]&&l.bound[g](b),f&&Ie(t,g)),a}):[],l.update(),f=!0,T(l.before_update),l.fragment=r?r(l.ctx):!1,e.target){if(e.hydrate){const g=De(e.target);l.fragment&&l.fragment.l(g),g.forEach(y)}else l.fragment&&l.fragment.c();e.intro&&$(t.$$.fragment),L(t,e.target,e.anchor,e.customElement),Le()}G(c)}class I{$destroy(){S(this,1),this.$destroy=k}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!je(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Ue(t){let e,n,r,o;return{c(){e=h("button"),n=M(t[0]),d(e,"title",t[1]),d(e,"class","material-icons svelte-1i3k0cm")},m(i,s){E(i,e,s),p(e,n),r||(o=Q(e,"click",t[3]),r=!0)},p(i,[s]){s&1&&ie(n,i[0]),s&2&&d(e,"title",i[1])},i:k,o:k,d(i){i&&y(e),r=!1,o()}}}function Ge(t,e,n){let{icon:r}=e,{title:o}=e;const i=Ce(),s=()=>i("click");return t.$$set=u=>{"icon"in u&&n(0,r=u.icon),"title"in u&&n(1,o=u.title)},[r,o,i,s]}class ee extends I{constructor(e){super(),R(this,e,Ge,Ue,F,{icon:0,title:1})}}const He=t=>({}),$e=t=>({}),Be=t=>({}),be=t=>({});function qe(t){let e,n,r,o,i,s,u,c,l,f;const g=t[2].actions,a=de(g,t,t[1],be),m=t[2].content,b=de(m,t,t[1],$e);return{c(){e=h("section"),n=h("div"),r=h("span"),o=M(t[0]),i=z(),s=h("div"),u=z(),a&&a.c(),c=z(),l=h("div"),b&&b.c(),d(s,"class","spacer svelte-dza7ja"),d(n,"class","title svelte-dza7ja"),d(l,"class","content svelte-dza7ja"),d(e,"class","svelte-dza7ja")},m(_,C){E(_,e,C),p(e,n),p(n,r),p(r,o),p(n,i),p(n,s),p(n,u),a&&a.m(n,null),p(e,c),p(e,l),b&&b.m(l,null),f=!0},p(_,[C]){(!f||C&1)&&ie(o,_[0]),a&&a.p&&(!f||C&2)&&pe(a,g,_,_[1],f?_e(g,_[1],C,Be):me(_[1]),be),b&&b.p&&(!f||C&2)&&pe(b,m,_,_[1],f?_e(m,_[1],C,He):me(_[1]),$e)},i(_){f||($(a,_),$(b,_),f=!0)},o(_){v(a,_),v(b,_),f=!1},d(_){_&&y(e),a&&a.d(_),b&&b.d(_)}}}function Ke(t,e,n){let{$$slots:r={},$$scope:o}=e,{title:i}=e;return t.$$set=s=>{"title"in s&&n(0,i=s.title),"$$scope"in s&&n(1,o=s.$$scope)},[i,o,r]}class X extends I{constructor(e){super(),R(this,e,Ke,qe,F,{title:0})}}function We(t){let e,n;return e=new ee({props:{slot:"actions",title:"Close",icon:"clear"}}),e.$on("click",t[4]),{c(){A(e.$$.fragment)},m(r,o){L(e,r,o),n=!0},p:k,i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){S(e,r)}}}function Ye(t){let e,n;return{c(){e=h("span"),n=M(t[1]),d(e,"slot","content")},m(r,o){E(r,e,o),p(e,n)},p(r,o){o&2&&ie(n,r[1])},d(r){r&&y(e)}}}function Xe(t){let e,n,r;return n=new X({props:{title:t[2],$$slots:{content:[Ye],actions:[We]},$$scope:{ctx:t}}}),{c(){e=h("dialog"),A(n.$$.fragment),d(e,"class","svelte-4cdcx4")},m(o,i){E(o,e,i),L(n,e,null),t[5](e),r=!0},p(o,[i]){const s={};i&4&&(s.title=o[2]),i&67&&(s.$$scope={dirty:i,ctx:o}),n.$set(s)},i(o){r||($(n.$$.fragment,o),r=!0)},o(o){v(n.$$.fragment,o),r=!1},d(o){o&&y(e),S(n),t[5](null)}}}function Je(t,e,n){let r,o,{error:i}=e,s;const u=()=>{s.close()};function c(l){V[l?"unshift":"push"](()=>{s=l,n(0,s)})}return t.$$set=l=>{"error"in l&&n(3,i=l.error)},t.$$.update=()=>{t.$$.dirty&8&&n(2,r=i==null?void 0:i.name),t.$$.dirty&8&&n(1,o=i==null?void 0:i.message),t.$$.dirty&9&&s!==void 0&&(i!==void 0?s.showModal():s.close())},[s,o,r,i,u,c]}class Qe extends I{constructor(e){super(),R(this,e,Je,Xe,F,{error:3})}}function Ve(t){let e;return{c(){e=h("header"),e.innerHTML=`<h1 class="svelte-1urzbfi">Factorio Pixel Art Generator</h1> 
  <span class="version svelte-1urzbfi">v1.0.0</span> 
  <a title="Changelog" class="material-icons svelte-1urzbfi" href="https://github.com/NicoKandut/factorio-solar-art/blob/main/CHANGELOG.md" target="_newtab">feed</a> 
  <a title="Github Repository" class="material-icons svelte-1urzbfi" href="https://github.com/NicoKandut/factorio-pixel-art-generator" target="_newtab"><svg height="16" aria-hidden="true" viewBox="0 0 16 16" width="16" data-view-component="true" style="fill: currentcolor; minWidth: 16px;"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a> 
  <a title="Discord Server" class="material-icons svelte-1urzbfi" href="https://discord.gg/jPf45KS54t" target="_newtab">discord</a> 
  <a title="Solar Art Generator" href="https://nicokandut.github.io/factorio-solar-art/" target="_newtab" class="svelte-1urzbfi"><img src="./solar_panel.png" alt="Solar Art Generator" class="svelte-1urzbfi"/></a>`,d(e,"class","svelte-1urzbfi")},m(n,r){E(n,e,r)},p:k,i:k,o:k,d(n){n&&y(e)}}}class Ze extends I{constructor(e){super(),R(this,e,null,Ve,F,{})}}function et(t){let e,n,r,o,i,s,u,c;return{c(){e=h("div"),n=h("span"),n.textContent="upload",r=z(),o=h("span"),o.textContent="Click here to upload a picture or drag and drop a picture here",i=z(),s=h("input"),d(n,"class","material-icons svelte-147nu1e"),d(o,"class","hint svelte-147nu1e"),d(s,"type","file"),d(s,"accept","image/*"),d(s,"class","svelte-147nu1e"),d(e,"class","svelte-147nu1e")},m(l,f){E(l,e,f),p(e,n),p(e,r),p(e,o),p(e,i),p(e,s),t[2](s),u||(c=[Q(s,"change",t[3]),Q(e,"click",t[4])],u=!0)},p:k,i:k,o:k,d(l){l&&y(e),t[2](null),u=!1,T(c)}}}function tt(t,e,n){const r=Ce();let o;function i(c){V[c?"unshift":"push"](()=>{o=c,n(0,o)})}return[o,r,i,c=>{var f;const l=(f=c.target.files)==null?void 0:f[0];r("upload",l)},()=>o==null?void 0:o.click()]}class nt extends I{constructor(e){super(),R(this,e,tt,et,F,{})}}function rt(t){let e,n,r,o,i,s,u,c,l,f,g;return{c(){e=h("div"),n=h("label"),r=h("span"),r.textContent="Mode",o=z(),i=h("select"),s=h("option"),u=M("Grayscale"),c=h("option"),l=M("[MOD] Concrete Tints"),s.__value=t[4].GRAYSCALE,s.value=s.__value,c.__value=t[4].COLORED,c.value=c.__value,t[1]===void 0&&Z(()=>t[7].call(i)),d(e,"slot","content")},m(a,m){E(a,e,m),p(e,n),p(n,r),p(n,o),p(n,i),p(i,s),p(s,u),p(i,c),p(c,l),ge(i,t[1]),f||(g=Q(i,"change",t[7]),f=!0)},p(a,m){m&18&&ge(i,a[1])},d(a){a&&y(e),f=!1,g()}}}function ve(t){let e,n;return e=new ee({props:{title:"Clear",icon:"clear"}}),e.$on("click",t[9]),{c(){A(e.$$.fragment)},m(r,o){L(e,r,o),n=!0},p:k,i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){S(e,r)}}}function ot(t){let e,n,r=t[0]!==void 0&&ve(t);return{c(){r&&r.c(),e=te()},m(o,i){r&&r.m(o,i),E(o,e,i),n=!0},p(o,i){o[0]!==void 0?r?(r.p(o,i),i&1&&$(r,1)):(r=ve(o),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(se(),v(r,1,1,()=>{r=null}),ce())},i(o){n||($(r),n=!0)},o(o){v(r),n=!1},d(o){r&&r.d(o),o&&y(e)}}}function it(t){let e,n,r;return{c(){e=h("img"),J(e.src,n=URL.createObjectURL(t[0]))||d(e,"src",n),d(e,"alt",r=t[0].name),d(e,"class","svelte-3ze1sx")},m(o,i){E(o,e,i)},p(o,i){i&1&&!J(e.src,n=URL.createObjectURL(o[0]))&&d(e,"src",n),i&1&&r!==(r=o[0].name)&&d(e,"alt",r)},i:k,o:k,d(o){o&&y(e)}}}function st(t){let e,n;return e=new nt({}),e.$on("upload",t[8]),{c(){A(e.$$.fragment)},m(r,o){L(e,r,o),n=!0},p:k,i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){S(e,r)}}}function ct(t){let e,n,r,o;const i=[st,it],s=[];function u(c,l){return c[0]===void 0?0:1}return e=u(t),n=s[e]=i[e](t),{c(){n.c(),r=te()},m(c,l){s[e].m(c,l),E(c,r,l),o=!0},p(c,l){let f=e;e=u(c),e===f?s[e].p(c,l):(se(),v(s[f],1,1,()=>{s[f]=null}),ce(),n=s[e],n?n.p(c,l):(n=s[e]=i[e](c),n.c()),$(n,1),n.m(r.parentNode,r))},i(c){o||($(n),o=!0)},o(c){v(n),o=!1},d(c){s[e].d(c),c&&y(r)}}}function we(t){let e,n,r,o;return e=new ee({props:{title:"Copy blueprint to clipboard",icon:"content_copy"}}),e.$on("click",t[5]),r=new ee({props:{title:"Download Blueprint",icon:"download"}}),r.$on("click",t[6]),{c(){A(e.$$.fragment),n=z(),A(r.$$.fragment)},m(i,s){L(e,i,s),E(i,n,s),L(r,i,s),o=!0},p:k,i(i){o||($(e.$$.fragment,i),$(r.$$.fragment,i),o=!0)},o(i){v(e.$$.fragment,i),v(r.$$.fragment,i),o=!1},d(i){S(e,i),i&&y(n),S(r,i)}}}function lt(t){let e,n,r=t[2]&&we(t);return{c(){r&&r.c(),e=te()},m(o,i){r&&r.m(o,i),E(o,e,i),n=!0},p(o,i){o[2]?r?(r.p(o,i),i&4&&$(r,1)):(r=we(o),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(se(),v(r,1,1,()=>{r=null}),ce())},i(o){n||($(r),n=!0)},o(o){v(r),n=!1},d(o){r&&r.d(o),o&&y(e)}}}function ye(t){let e,n;return{c(){e=h("img"),J(e.src,n=t[2])||d(e,"src",n),d(e,"alt","Preview"),d(e,"class","svelte-3ze1sx")},m(r,o){E(r,e,o)},p(r,o){o&4&&!J(e.src,n=r[2])&&d(e,"src",n)},d(r){r&&y(e)}}}function at(t){let e,n=t[2]&&ye(t);return{c(){n&&n.c(),e=te()},m(r,o){n&&n.m(r,o),E(r,e,o)},p(r,o){r[2]?n?n.p(r,o):(n=ye(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&y(e)}}}function ut(t){let e,n,r,o,i,s,u,c,l,f,g;return n=new Ze({}),o=new X({props:{title:"Settings",$$slots:{content:[rt]},$$scope:{ctx:t}}}),s=new X({props:{title:"Source",$$slots:{content:[ct],actions:[ot]},$$scope:{ctx:t}}}),c=new X({props:{title:"Preview",$$slots:{content:[at],actions:[lt]},$$scope:{ctx:t}}}),f=new Qe({props:{error:t[3]}}),{c(){e=h("main"),A(n.$$.fragment),r=z(),A(o.$$.fragment),i=z(),A(s.$$.fragment),u=z(),A(c.$$.fragment),l=z(),A(f.$$.fragment),d(e,"class","svelte-3ze1sx")},m(a,m){E(a,e,m),L(n,e,null),p(e,r),L(o,e,null),p(e,i),L(s,e,null),p(e,u),L(c,e,null),E(a,l,m),L(f,a,m),g=!0},p(a,[m]){const b={};m&32770&&(b.$$scope={dirty:m,ctx:a}),o.$set(b);const _={};m&32773&&(_.$$scope={dirty:m,ctx:a}),s.$set(_);const C={};m&32772&&(C.$$scope={dirty:m,ctx:a}),c.$set(C);const B={};m&8&&(B.error=a[3]),f.$set(B)},i(a){g||($(n.$$.fragment,a),$(o.$$.fragment,a),$(s.$$.fragment,a),$(c.$$.fragment,a),$(f.$$.fragment,a),g=!0)},o(a){v(n.$$.fragment,a),v(o.$$.fragment,a),v(s.$$.fragment,a),v(c.$$.fragment,a),v(f.$$.fragment,a),g=!1},d(a){a&&y(e),S(n),S(o),S(s),S(c),a&&y(l),S(f,a)}}}const D=1;function ft(){const t=performance.measure("total time","start","end").duration.toFixed(0),e=performance.measure("preparation time","start","proc-start").duration.toFixed(0),n=performance.measure("processing time","proc-start","proc-end").duration.toFixed(0),r=performance.measure("processing time","proc-end","end").duration.toFixed(0),o=`[js] Done. Took ${t} ms total.`;console.group(o),console.info("Preparation",e,"ms"),console.info("Processing",n,"ms"),console.info("End",r,"ms"),console.groupEnd()}function dt(t,e,n){let r,o,i,s,u,c,l;const f={GRAYSCALE:0,COLORED:1};async function g(){const j=await(await(await fetch("./out.js")).blob()).text();r=await Function('"use strict"; '+j.replace("var Module = ","return"))()(),u=r.cwrap("process","string",["number","number","number","number","number","number"]),window.module=r}g();async function a(P){performance.mark("start");let O,j;try{const w=await createImageBitmap(P),ne=document.createElement("canvas");ne.width=w.width,ne.height=w.height;const le=ne.getContext("2d");le.drawImage(w,0,0);const Se=le.getImageData(0,0,w.width,w.height);O=r._create_buffer(w.width,w.height),j=r._create_buffer(w.width*D,w.height*D),r.HEAP8.set(Se.data,O),performance.mark("proc-start"),s=u(O,j,w.width,w.height,D,l),performance.mark("proc-end");const x=document.createElement("canvas"),ae=x.getContext("2d");x.width=w.width*D,x.height=w.height*D;const Ae=r.HEAPU8.subarray(j,j+x.width*x.height*4),ue=ae.createImageData(w.width*D,w.height*D);ue.data.set(Ae),ae.putImageData(ue,0,0),n(2,i=x.toDataURL("image/png")),performance.mark("end"),ft()}catch(w){n(3,c=w)}finally{r._destroy_buffer(O),r._destroy_buffer(j)}}async function m(){if(s!==void 0)try{await navigator.clipboard.writeText(s)}catch(P){console.error("Unexpected error while copying:",P)}}async function b(){if(s===void 0)return;const O=await(await window.showSaveFilePicker({types:[{description:"Text Files",accept:{"text/plain":[".txt"]}}],suggestedName:"generated blueprint"})).createWritable();await O.write(s),await O.close()}function _(){l=Ne(this),n(1,l),n(0,o),n(4,f)}const C=P=>{n(0,o=P.detail)},B=()=>{n(0,o=void 0),n(2,i=void 0)};return t.$$.update=()=>{t.$$.dirty&3&&o&&(a(o),n(1,l),n(0,o))},[o,l,i,c,f,m,b,_,C,B]}class _t extends I{constructor(e){super(),R(this,e,dt,ut,F,{})}}new _t({target:document.getElementById("app")});
